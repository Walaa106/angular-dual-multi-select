angular.module("DualMultiSelect",["TreeView"]).directive("dualmultiselect",["$q","$filter",function(e,l){return{restrict:"AE",scope:{options:"=",ngModel:"="},controller:["$scope",function(l){function t(){var t=e.defer();return angular.isFunction(l.options.items.success)?l.options.items.success(function(e){t.resolve(e)}):t.resolve(l.options.items),t.promise.then(function(e){l.items=angular.copy(e);var t=n(l.items);l.helperObject=t.obj,l.rootMap=t.rootMap,l.helperArray=t.arr}),t.promise}function n(e){function t(e,i){if(angular.isArray(e))for(var a=0;a<e.length;a++)n[e[a][l.valueProperty]]={body:e[a]},o.push({text:e[a][l.displayProperty],id:e[a][l.valueProperty]}),i||r.push(n[e[a][l.valueProperty]]),e[a][l.childrenProperty]&&t(e[a][l.childrenProperty],e[a])}var n={},r=[],o=[];return t(e),{obj:n,rootMap:r,arr:o}}l.valueProperty=l.options.valueProperty||"id",l.displayProperty=l.options.displayProperty||"text",l.childrenProperty=l.options.childrenProperty||"children",l.selectAll=function(){var e=[];angular.forEach(l.rootMap,function(t){e.push(t.body[l.valueProperty])}),l.ngModel=0===e.length?void 0:e},l.deSelectAll=function(){l.ngModel=void 0},l.deSelect=function(e){var t=angular.copy(l.ngModel),n=t.indexOf(e);t.splice(n,1),l.ngModel=0===t.length?void 0:t},l.isShow=function(e){return angular.isArray(l.ngModel)?-1!==l.ngModel.indexOf(e):!1},l.getData=function(e){return l.helperObject[e].body},l.dataPasser=t()}],templateUrl:"angular-dual-multi-select.tpl"}}]),function(){"use strict";angular.module("DualMultiSelect").run(["$templateCache",function(e){e.put("angular-dual-multi-select.tpl",'<div class="dualmultiselect"> \n	<div class="row"> \n		<div class="col-lg-6 col-md-6 col-sm-6"> \n			<label>{{ options.labelAll }}</label> \n			<button class="btn btn-default btn-xs" ng-click="selectAll()"> 全选 </button> \n			<div class="search-wrap">\n				<input class="form-control input-sm" ng-model="searchLeft" placeholder="筛选">\n			</div>\n			<div class="pool"> \n				<tree-view \n				input-model="dataPasser"\n				ng-model="ngModel"\n				value-property="{{ valueProperty }}"\n				display-property="{{ displayProperty }}"\n				filter-model="searchLeft"></tree-view>\n			</div>\n		</div>\n		<div class="col-lg-6 col-md-6 col-sm-6"> \n			<label>{{ options.labelSelected }}</label> \n			<button class="btn btn-default btn-xs" ng-click="deSelectAll()"> 全不选 </button> \n			<div class="search-wrap">\n				<input class="form-control input-sm" ng-model="searchRight" placeholder="筛选">\n			</div>\n			<div class="pool"> \n				<ul> \n					<li ng-repeat="item in helperArray | filter:searchRight" ng-show="isShow(item.id)"> \n						<a ng-click="deSelect(item.id)">\n							{{ item.text }}\n						</a>\n					</li>\n				</ul> \n			</div>\n		</div>\n	</div>\n</div>')}])}();