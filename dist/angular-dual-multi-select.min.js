angular.module("DualMultiSelect",["TreeView"]).directive("dualmultiselect",["$q","$filter",function(e,l){return{restrict:"AE",scope:{options:"=",ngModel:"="},controller:["$scope",function(t){function n(){var l=e.defer();return angular.isFunction(t.options.items.then)?t.options.items.then(function(e){l.resolve(e)}):l.resolve(t.options.items),l.promise.then(function(e){t.items=angular.copy(e);var l=r(t.items);t.helperObject=l.obj,t.rootMap=l.rootMap,t.helperArray=l.arr}),l.promise}function r(e){function l(e,i){if(angular.isArray(e))for(var a=0;a<e.length;a++)n[e[a][t.valueProperty]]={body:e[a]},o.push({text:e[a][t.displayProperty],id:e[a][t.valueProperty]}),i||r.push(n[e[a][t.valueProperty]]),e[a][t.childrenProperty]&&l(e[a][t.childrenProperty],e[a])}var n={},r=[],o=[];return l(e),{obj:n,rootMap:r,arr:o}}t.valueProperty=t.options.valueProperty||"id",t.displayProperty=t.options.displayProperty||"text",t.childrenProperty=t.options.childrenProperty||"children";({filter:l("filter")});t.selectAll=function(){var e=[];angular.forEach(t.rootMap,function(l){e.push(l.body[t.valueProperty])}),t.ngModel=0===e.length?void 0:e},t.deSelectAll=function(){t.ngModel=void 0},t.deSelect=function(e){var l=angular.copy(t.ngModel),n=l.indexOf(e);l.splice(n,1),t.ngModel=0===l.length?void 0:l},t.isShow=function(e){return angular.isArray(t.ngModel)?-1!==t.ngModel.indexOf(e):!1},t.getData=function(e){return t.helperObject[e].body},t.dataPasser=n()}],templateUrl:"angular-dual-multi-select.tpl"}}]),function(){"use strict";angular.module("DualMultiSelect").run(["$templateCache",function(e){e.put("angular-dual-multi-select.tpl",'<div class="dualmultiselect"> \n	<div class="row"> \n		<div class="col-lg-6 col-md-6 col-sm-6"> \n			<label>{{ options.labelAll }}</label> \n			<button class="btn btn-default btn-xs" ng-click="selectAll()"> 全选 </button> \n			<div class="search-wrap">\n				<input class="form-control input-sm" ng-model="searchLeft" placeholder="筛选">\n			</div>\n			<div class="pool"> \n				<tree-view \n				input-model="dataPasser"\n				ng-model="ngModel"\n				value-property="{{ valueProperty }}"\n				display-property="{{ displayProperty }}"\n				filter-model="searchLeft"></tree-view>\n			</div>\n		</div>\n		<div class="col-lg-6 col-md-6 col-sm-6"> \n			<label>{{ options.labelSelected }}</label> \n			<button class="btn btn-default btn-xs" ng-click="deSelectAll()"> 全不选 </button> \n			<div class="search-wrap">\n				<input class="form-control input-sm" ng-model="searchRight" placeholder="筛选">\n			</div>\n			<div class="pool"> \n				<ul> \n					<li ng-repeat="item in helperArray | filter:searchRight" ng-show="isShow(item.id)"> \n						<a ng-click="deSelect(item.id)">\n							{{ item.text }}\n						</a>\n					</li>\n				</ul> \n			</div>\n		</div>\n	</div>\n</div>')}])}();